<!DOCTYPE html>
<html lang="en"
>
<head>
    <title>Right way of adding user authentication to Django - Jinchuriki</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link href="/images/naruto.ico" rel="icon">

<link rel="image_src" href="/images/django-pony.png">

        <meta name="author" content="Naren Arya" />
        <meta name="keywords" content="python,django,django auth,authentication,ubuntu14.04,django auth model,django authentication pattern" />
        <meta name="description" content="This article shows how to build a login system using Django&#39;s inbuilt Auth model" />

        <meta property="og:site_name" content="Jinchuriki" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Right way of adding user authentication to Django"/>
        <meta property="og:url" content="/right-way-django-authentication.html"/>
        <meta property="og:description" content="This article shows how to build a login system using Django&#39;s inbuilt Auth model"/>
        <meta property="article:published_time" content="2016-01-20" />
            <meta property="article:section" content="python" />
            <meta property="article:tag" content="python" />
            <meta property="article:tag" content="django" />
            <meta property="article:tag" content="django auth" />
            <meta property="article:tag" content="authentication" />
            <meta property="article:tag" content="ubuntu14.04" />
            <meta property="article:tag" content="django auth model" />
            <meta property="article:tag" content="django authentication pattern" />
            <meta property="article:author" content="Naren Arya" />

    <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@Narenarya3">
        <meta name="twitter:creator" content="@Narenarya3">
    <meta name="twitter:domain" content="">

    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.united.min.css" type="text/css"/>
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>


</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
<img src="/images/naruto.ico" width="30px"/> Jinchuriki            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li >
                            <a href="/category/chess.html">Chess</a>
                        </li>
                        <li >
                            <a href="/category/golang.html">Golang</a>
                        </li>
                        <li >
                            <a href="/category/javascript.html">Javascript</a>
                        </li>
                        <li >
                            <a href="/category/pollitics.html">Pollitics</a>
                        </li>
                        <li class="active">
                            <a href="/category/python.html">Python</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->

<div class="row">
<div id="myCarousel">
  <div class="image-viewer-base-image" style='background: url("/images/hashirama1.jpg");'></div>
  <div class="image-viewer-base-image" style='background: url("/images/coding1.png");'></div>
  <div class="image-viewer-base-image" style='background: url("/images/book1.png");'></div>
}
}
</div>
</div>
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="/right-way-django-authentication.html"
                       rel="bookmark"
                       title="Permalink to Right way of adding user authentication to Django">
                        Right way of adding user authentication to Django
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-01-20T00:00:00+05:30"> Wed 20 January 2016</time>
    </span>
            <span class="label label-default">By</span>
            <a href="/author/naren-arya.html"><i class="fa fa-user"></i> Naren Arya</a>



<span class="label label-default">Tags</span>
	<a href="/tag/python.html">python</a>
        /
	<a href="/tag/django.html">django</a>
        /
	<a href="/tag/django-auth.html">django auth</a>
        /
	<a href="/tag/authentication.html">authentication</a>
        /
	<a href="/tag/ubuntu1404.html">ubuntu14.04</a>
        /
	<a href="/tag/django-auth-model.html">django auth model</a>
        /
	<a href="/tag/django-authentication-pattern.html">django authentication pattern</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <!---
Begin your post content here
-->

<p><img src="/images/django-pony.png" height="500px" width="600px"></p>
<p>If you are building a new Django website from scratch, the first thing you implement is the User authentication. Even though Django provides a good authentication platform to use, many developers ignores it and they do <b>re-invent the wheel</b>. </p>
<p>I saw lot of beginners troubled adding user authentication for their Django projects. To remove that ambiguity, We today discuss here about a straight approach for implementing django authentication pattern.</p>
<p>In my experience I too did same mistakes of having a login form and POST data to a view and process it manually. But Django is so evolved that everything is available right out of the box.</p>
<p>Yoou can review the entire code of this article at: </p>
<p><b><a href="https://github.com/narenaryan/django-auth-pattern" style="color:red" target="_blank">https://github.com/narenaryan/django-auth-pattern</a></b></p>
<h3>Step 1 : Understanding the Django in-built Auth system</h3>
<p>Django's default auth system is present in the in-built app</p>
<div class="highlight"><pre>django.contrib.auth
</pre></div>


<p>A Django project mainly consists of apps performing various functions. Similarly Django has many in-built apps to perform various tasks. Authentication is one main function.</p>
<p>If we wish to implement user authentication, better we can use the existing user model and views rather than creating our own.</p>
<p>The important things why it is better option
<br /></p>
<ul>
<li><b>Login</b></li>
<li><b>Logout</b></li>
<li><b>Logout then Login</b></li>
<li><b>Password Reset</b></li>
<li><b>Password Change</b></li>
</ul>
<p>All these functions are available as views in the app</p>
<p><b>django.contrib.auth</b></p>
<p>Similarly It also have the well built <b>Forms</b> to show the required fields in HTML template and directly process in background.</p>
<h3>Step 2 : Adding authentication to django website from scratch</h3>
<p>I am going to start a fresh Django project and will add login/logout to it.</p>
<div class="highlight"><pre><span class="nv">$ </span>django-admin startproject authtest
<span class="nv">$ </span><span class="nb">cd </span>authtest
<span class="nv">$ </span>django-admin startapp log
</pre></div>


<p>So now we created a django project called <b>authtest</b> and added an app called <b>log</b>.</p>
<p>The project tree looks like this.</p>
<p><img src="/images/dj-tree.png" height="500px" width="600px"></p>
<p>I here by use Flatly, a bootstrap flavor from shopify. I am going to add static files to my project. I already prepared them. Just download from this link. They are nothing but bootstrap and jquery files. Unzip that static folder to your project root(where manage.py lies)</p>
<p><br />
<a style="color:red" href="https://github.com/narenaryan/website/blob/gh-pages/files/static.zip">https://github.com/narenaryan/website/blob/gh-pages/files/static.zip</a> </p>
<p>After that create a folder called <b>templates</b> in project root.</p>
<div class="highlight"><pre><span class="nv">$ </span>mkdir templates
</pre></div>


<p>Now your project tree should look like</p>
<p><img src="/images/dj-tree1.png" height="500px" width="600px"></p>
<p>Yeah, now we are ready to go with modifying few settings and creating template files. Modify <b>settings.py</b> to add following changes.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># Add static folder to STATIC_DIRS</span>
<span class="n">STATICFILES_DIRS</span> <span class="o">=</span> <span class="p">[</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">&quot;static&quot;</span><span class="p">),</span>
<span class="p">]</span>

<span class="c"># Add templates to DIRS</span>
<span class="n">TEMPLATES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s">&#39;django.template.backends.django.DjangoTemplates&#39;</span><span class="p">,</span>
        <span class="s">&#39;DIRS&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;templates&quot;</span><span class="p">],</span>  <span class="c">#modify this line</span>
        <span class="s">&#39;APP_DIRS&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
        <span class="s">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">&#39;context_processors&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s">&#39;django.template.context_processors.debug&#39;</span><span class="p">,</span>
                <span class="s">&#39;django.template.context_processors.request&#39;</span><span class="p">,</span>
                <span class="s">&#39;django.contrib.auth.context_processors.auth&#39;</span><span class="p">,</span>
                <span class="s">&#39;django.contrib.messages.context_processors.messages&#39;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">]</span>
</pre></div>
</td></tr></table>

<p>Now we need to prepare a home view which we need to show when User logs-in.
So let us create a view called <b>home</b> in log app.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#log/views.py</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.decorators</span> <span class="kn">import</span> <span class="n">login_required</span>

<span class="c"># Create your views here.</span>
<span class="c"># this login required decorator is to not allow to any  </span>
<span class="c"># view without authenticating</span>
<span class="nd">@login_required</span><span class="p">(</span><span class="n">login_url</span><span class="o">=</span><span class="s">&quot;login/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="s">&quot;home.html&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Now create a new file <b>urls.py</b> in log app and map this view</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># log/urls.py</span>
<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>

<span class="c"># We are adding a URL called /home</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">home</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;home&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</td></tr></table>

<p>It means whenever a user logs in successfully, he will land on <b>/home</b>
Now we can add this to main <b>urls.py</b> of project</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># authtest/urls.py</span>
<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;log.urls&#39;</span><span class="p">)),</span>
<span class="p">]</span>
</pre></div>
</td></tr></table>

<p>But now the actual fun starts. We can add the in-built login view from django.contrib.auth.views into the main <b>urls.py</b>. It has two main methods</p>
<ul>
<li>login</li>
<li>logout</li>
</ul>
<p>We can map these views to any URL where user should signup. Since I wanted user to come to login page first I use '/login' URL. So modifying urls.py results in below code. </p>
<h2>Adding Login to urls.py</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># authtest/urls.py</span>
<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="c"># Add this import</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;log.urls&#39;</span><span class="p">)),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^login/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;template_name&#39;</span><span class="p">:</span> <span class="s">&#39;login.html&#39;</span><span class="p">},</span> 
<span class="p">]</span>
</pre></div>
</td></tr></table>

<p>Here we are forcing the django to use login.html as template for login view.
Now let us create templates. One Base, Login, home templates.<br />
<b>templates/base.html </b></p>
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">load</span> <span class="nv">staticfiles</span> <span class="cp">%}</span>

<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;title&gt;</span>Auth Demo<span class="nt">&lt;/title&gt;</span>
                <span class="c">&lt;!-- Core CSS - Include with every page --&gt;</span>
                <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">static</span> <span class="s1">&#39;css/bootstrap.min.css&#39;</span> <span class="cp">%}</span><span class="s">&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;/head&gt;</span>
                <span class="nt">&lt;body&gt;</span>
                    <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;navbar navbar-default&quot;</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container-fluid&quot;</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;navbar-header&quot;</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">class=</span><span class="s">&quot;navbar-toggle collapsed&quot;</span> <span class="na">data-toggle=</span><span class="s">&quot;collapse&quot;</span> <span class="na">data-target=</span><span class="s">&quot;#bs-example-navbar-collapse-1&quot;</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;sr-only&quot;</span><span class="nt">&gt;</span>Toggle navigation<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;icon-bar&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
                                    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;icon-bar&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
                                    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;icon-bar&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
                                <span class="nt">&lt;/button&gt;</span>
                                <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;navbar-brand&quot;</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Rocky Balbo<span class="nt">&lt;/a&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;collapse navbar-collapse&quot;</span> <span class="na">id=</span><span class="s">&quot;bs-example-navbar-collapse-1&quot;</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;nav navbar-nav navbar-right&quot;</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;dropdown&quot;</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">class=</span><span class="s">&quot;dropdown-toggle&quot;</span> <span class="na">data-toggle=</span><span class="s">&quot;dropdown&quot;</span> <span class="na">role=</span><span class="s">&quot;button&quot;</span> <span class="na">aria-expanded=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>Account
                                            <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caret&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
                                        <span class="nt">&lt;/a&gt;</span>
                                        <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;dropdown-menu&quot;</span> <span class="na">role=</span><span class="s">&quot;menu&quot;</span><span class="nt">&gt;</span>
                                            <span class="nt">&lt;li&gt;</span>
                                                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/home&quot;</span><span class="nt">&gt;</span>home<span class="nt">&lt;/a&gt;</span>
                                            <span class="nt">&lt;/li&gt;</span>
                                            <span class="nt">&lt;li&gt;</span>
                                                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Another action<span class="nt">&lt;/a&gt;</span>
                                            <span class="nt">&lt;/li&gt;</span>
                                            <span class="nt">&lt;li&gt;</span>
                                                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Something else here<span class="nt">&lt;/a&gt;</span>
                                            <span class="nt">&lt;/li&gt;</span>
                                            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;divider&quot;</span><span class="nt">&gt;&lt;/li&gt;</span>
                                            <span class="nt">&lt;li&gt;</span>
                                                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Separated link<span class="nt">&lt;/a&gt;</span>
                                            <span class="nt">&lt;/li&gt;</span>
                                            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;divider&quot;</span><span class="nt">&gt;&lt;/li&gt;</span>
                                            <span class="nt">&lt;li&gt;</span>
                                                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/logout&quot;</span><span class="nt">&gt;</span>Logout<span class="nt">&lt;/a&gt;</span>
                                            <span class="nt">&lt;/li&gt;</span>
                                        <span class="nt">&lt;/ul&gt;</span>
                                    <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;/ul&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/nav&gt;</span>

                <span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
                <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>


                    <span class="c">&lt;!-- Core Scripts - Include with every page --&gt;</span>
                    <span class="nt">&lt;script</span> <span class="na">src =</span> <span class="s">&quot;</span><span class="cp">{%</span> <span class="k">static</span> <span class="s1">&#39;js/jquery.min.js&#39;</span> <span class="cp">%}</span><span class="s">&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
                    <span class="nt">&lt;script</span> <span class="na">src =</span> <span class="s">&quot;</span><span class="cp">{%</span> <span class="k">static</span> <span class="s1">&#39;js/bootstrap.min.js&#39;</span> <span class="cp">%}</span><span class="s">&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">javascript</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>


            <span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;/html&gt;</span>
</pre></div>


<p>Now let us add login.html. Don't confuse by seeing it's content. We are just using the auth form which are in-built in Django.<br /></p>
<p><b>templates/login.html </b></p>
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;base.html&#39;</span> <span class="cp">%}</span>


<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">form.errors</span> <span class="cp">%}</span>

<span class="nt">&lt;p&gt;</span>Your username and password didn&#39;t match. Please try again.<span class="nt">&lt;/p&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">if</span> <span class="nv">next</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">user.is_authenticated</span> <span class="cp">%}</span>

<span class="nt">&lt;p&gt;</span>Your account doesn&#39;t have access to this page. To proceed,
    please login with an account that has access.<span class="nt">&lt;/p&gt;</span>
    <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>

<span class="nt">&lt;p&gt;</span>Please login to see this page.<span class="nt">&lt;/p&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-md-4 col-md-offset-4&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;login-panel panel panel-default&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;panel-heading&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">&quot;panel-title&quot;</span><span class="nt">&gt;</span>Please Sign In<span class="nt">&lt;/h3&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;panel-body&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span> <span class="na">action=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;django.contrib.auth.views.login&#39;</span> <span class="cp">%}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span>

                        <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;bs-component&quot;</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;table&gt;</span>
                                <span class="nt">&lt;tr&gt;</span>
                                    <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.username.label_tag</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
                                    <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.username</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
                                <span class="nt">&lt;/tr&gt;</span>
                                <span class="nt">&lt;tr&gt;</span>
                                    <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.password.label_tag</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
                                    <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.password</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
                                <span class="nt">&lt;/tr&gt;</span>
                            <span class="nt">&lt;/table&gt;</span>
                        <span class="nt">&lt;/p&gt;</span>
                        <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;bs-component&quot;</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;center&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;btn btn-success btn-sm&quot;</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;login&quot;</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;/center&gt;</span>
                        <span class="nt">&lt;/p&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;next&quot;</span> <span class="na">value=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">next</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;/form&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">javascript</span> <span class="cp">%}</span>


<span class="nt">&lt;script&gt;</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="k">not</span> <span class="nv">user.is_authenticated</span> <span class="cp">%}</span>
$(&quot;ul.nav.navbar-nav.navbar-right&quot;).css(&quot;display&quot;,&quot;none&quot;);
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="nt">&lt;/script&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>


<p>Coming to home page we can keep it simple. So It consists of just a message<br />
<b>templates/home.html</b></p>
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;base.html&#39;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;jumbotron&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;h1&gt;</span>Hello<span class="nt">&lt;/h1&gt;</span>
            <span class="nt">&lt;p&gt;</span>You are on your Dashboard<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>


<p>Now the elements which are rendered by Django auth.forms are plain elements. But in order to make them look like Bootstrap elements you need to add class to those elements. There is a trick of doing this. You need to create a form called LoginForm in log.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#log/forms.py</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.forms</span> <span class="kn">import</span> <span class="n">AuthenticationForm</span> 
<span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>

<span class="c"># If you don&#39;t do this you cannot use Bootstrap CSS</span>
<span class="k">class</span> <span class="nc">LoginForm</span><span class="p">(</span><span class="n">AuthenticationForm</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&quot;Username&quot;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> 
                               <span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;form-control&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;username&#39;</span><span class="p">}))</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&quot;Password&quot;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> 
                               <span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;form-control&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;password&#39;</span><span class="p">}))</span>
</pre></div>
</td></tr></table>

<p>But we need to tell Django to use this extended LoginForm along with it's <b>auth.view.login</b>. So modify <b>urls.py</b> to this. </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># authtest/urls.py</span>
<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="c"># Add this import</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">views</span>
<span class="kn">from</span> <span class="nn">log.forms</span> <span class="kn">import</span> <span class="n">LoginForm</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;log.urls&#39;</span><span class="p">)),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^login/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;template_name&#39;</span><span class="p">:</span> <span class="s">&#39;login.html&#39;</span><span class="p">,</span> <span class="s">&#39;authentication_form&#39;</span><span class="p">:</span> <span class="n">LoginForm</span><span class="p">}),</span>  
<span class="p">]</span>
</pre></div>
</td></tr></table>

<p>Now we need to define where user should be redirected on successful login. You should mention a setting called <b>"LOGIN_REDIRECT_URL"</b> to point a URL where user will move on correct login. So modify your settings file to add below line</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">LOGIN_REDIRECT_URL</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="c"># It means home view</span>
</pre></div>
</td></tr></table>

<h2>Adding Logout to urls.py</h2>
<p>For Logout there is a view called logout that is provided by Django <b>contrib.auth.views</b> . We can add that too to our urls.py. But here we have a privilege of telling what URL user should redirect to.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># authtest/urls.py</span>
<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="c"># Add this import</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">views</span>
<span class="kn">from</span> <span class="nn">log.forms</span> <span class="kn">import</span> <span class="n">LoginForm</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;log.urls&#39;</span><span class="p">)),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^login/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;template_name&#39;</span><span class="p">:</span> <span class="s">&#39;login.html&#39;</span><span class="p">,</span> <span class="s">&#39;authentication_form&#39;</span><span class="p">:</span> <span class="n">LoginForm</span><span class="p">}),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^logout/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">logout</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;next_page&#39;</span><span class="p">:</span> <span class="s">&#39;/login&#39;</span><span class="p">}),</span>  
<span class="p">]</span>
</pre></div>
</td></tr></table>

<p>As you see <b>next_page</b> tells the page to which logout should redirected to.</p>
<p>Now let us migrate and run the django project.</p>
<div class="highlight"><pre><span class="nv">$ </span>python manage.py migrate
<span class="nv">$ </span>python manage.py createsuperuser
<span class="nv">$ </span>python manage.py runserver 8080
</pre></div>


<p>Then you visit to http://localhost:8080 and will find a nice website with</p>
<p><img src="/images/web1.png"></p>
<p>If you login with your superuser credentials, you will see the Dashboard like this</p>
<p><img src="/images/web2.png"></p>
<p>You can access the entire tutorial code here.</p>
<p><b><a href="https://github.com/narenaryan/django-auth-pattern" style="color:red" target="_blank">https://github.com/narenaryan/django-auth-pattern</a></b></p>
<p>In this way you can implement Register, Password Forget, Password Reset without any additional code. Django provides you everything about authentication.</p>
<p>If you have any queries, just mail me at <b>narenarya@live.com</b></p>
<h2><div style="color:green">References</div></h2>
<ul>
<li>
<p><a href="https://bootswatch.com/flatly/" style="color:blue" target="_blank">https://bootswatch.com/flatly/</a></p>
</li>
<li>
<p><a href="https://docs.djangoproject.com/en/1.9/topics/auth/default/" style="color:blue" target="_blank">https://docs.djangoproject.com/en/1.9/topics/auth/default/</a></p>
</li>
<li>
<p><a href="https://docs.djangoproject.com/en/1.9/topics/auth/customizing/" style="color:blue" target="_blank">https://docs.djangoproject.com/en/1.9/topics/auth/customizing/</a></p>
</li>
</ul>
<p>Thank you :). Drop a comment if you have any query at narenarya@live.com    </p>
            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'blognarenaryain'; // required: replace example with your forum shortname

                    var disqus_identifier = 'right-way-django-authentication';
                var disqus_url = '/right-way-django-authentication.html';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<div id="aboutme">
        <p>
            <img width="100%" class="img-thumbnail" src="/images/author.jpg"/>
        </p>
    <p>
        <strong>About Naren Arya</strong><br/>
        A Software engineer, Photographer and Book Lover
    </p>
</div>
<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://github.com/narenaryan"><i class="fa fa-github-square fa-lg"></i> Github</a></li>
                <li class="list-group-item"><a href="https://in.linkedin.com/in/narenarya"><i class="fa fa-linkedin-square fa-lg"></i> LinkedIn</a></li>
                <li class="list-group-item"><a href="https://twitter.com/Narenarya3"><i class="fa fa-twitter-square fa-lg"></i> Twitter</a></li>
              </ul>
            </li>

            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
                <ul class="list-group" id="recentposts">
                    <li class="list-group-item">
                        <a href="/tips-tricks-go.html">
                            Golang Tips and Tricks to Crack Competitive programming
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/concurrent-http-in-go.html">
                            Making concurrent HTTP requests in Go programming language
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/disaster-capitalism-at-its-best.html">
                            Disaster capitalism at it's peak?
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/fishing-pole-attack.html">
                            Analyzing the fishing pole trap in chess
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/angular-js-quick-introduction.html">
                            Exploring the beautiful world of Angular JS
                        </a>
                    </li>
                </ul>
            </li>

<!-- 
            <li class="list-group-item"><a href="/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group " id="tags">
                </ul>
            </li>
        -->
    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="https://impythonist.wordpress.com" target="_blank">
                Impythonist
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://python.org/" target="_blank">
                Python.org
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://naruto.wikia.com/wiki/Jinch%C5%ABriki" target="_blank">
                What is Jinchuriki
            </a>
        </li>
      </ul>
    </li>
    </ul>
</section>
<section  class="well well-sm">

            <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/Narenarya3" data-widget-id="687632535438798852">Tweets by @Narenarya3</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

</section>

<section class="well well-sm">
<iframe src='http://chess-db.com/public/chessquote.jsp' scrolling='no' width='240' height='290' frameborder='0'></iframe>  
</section>            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2016 Naren Arya
            &middot; Powered by <b><a href="http://python.org/" target="_blank">Python</a> | <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a> | Github Pages         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>


<script>
  (function (w,i,d,g,e,t,s) {w[d] = w[d]||[];t= i.createElement(g);
    t.async=1;t.src=e;s=i.getElementsByTagName(g)[0];s.parentNode.insertBefore(t, s);
  })(window, document, '_gscq','script','//widgets.getsitecontrol.com/33724/script.js');
</script>

    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-575fa97178a9a655"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'blognarenaryain'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-72340641-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>